{
  "name": "WPæ¯æ—¥è‡ªå‹•ç™¼æ–‡ç« ä¸¦é€šçŸ¥",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -736,
        -192
      ],
      "id": "615f316f-56a7-4b7d-bc5a-158d8fc51e36",
      "name": "When clicking â€˜Execute workflowâ€™"
    },
    {
      "parameters": {
        "url": "https://example.com/wp-json/wp/v2/categories",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -480,
        -192
      ],
      "id": "bbdf19ba-e870-4b05-8b9c-bdf8bb0e6ab2",
      "name": "HTTP Request",
      "credentials": {
        "wordpressApi": {
          "id": "mVkObqOlBXJkc3l8",
          "name": "Wordpress account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "example",
          "mode": "list",
          "cachedResultName": "example SEO n8nç™¼å¸ƒ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/example/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "å–å¾—åˆ†é¡ID/æ›´æ–°æ•¸é‡",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/example/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": "=",
            "æ•¸é‡": "={{ $json.count }}",
            "åˆ†é¡": "={{ $json.name }}",
            "IDs": "={{ $json.id }}"
          },
          "matchingColumns": [
            "åˆ†é¡"
          ],
          "schema": [
            {
              "id": "åˆ†é¡",
              "displayName": "åˆ†é¡",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "IDs",
              "displayName": "IDs",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "æ•¸é‡",
              "displayName": "æ•¸é‡",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -272,
        -192
      ],
      "id": "80be28a7-6cdf-4973-a39d-ec6d449f5a78",
      "name": "Update row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "DGZU6cXtAGuDvYyN",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// --- 1. å–å¾—ã€ŒGoogle Sheetã€ä¸Šçš„æ‰€æœ‰åˆ†é¡ ---\n// (æ³¨æ„ï¼ç¯€é»åç¨± 'æ‰¾å‡ºå„åˆ†é¡æ•¸é‡' å¿…é ˆè·Ÿä½ çš„ç¯€é»åç¨±ä¸€æ¨¡ä¸€æ ·)\nconst allSheetRows = $items('æ‰¾å‡ºå„åˆ†é¡æ•¸é‡').map(item => item.json);\n\n// --- 2. æ’é™¤ã€Œæœªåˆ†é¡ã€æˆ–ä¸æƒ³ç™¼æ–‡çš„ ID ---\nconst excludeIds = [1, 158]; // <-- åœ¨é€™è£¡åŠ å…¥ä¸æƒ³ç™¼æ–‡çš„åˆ†é¡ ID\nconst filteredSheetRows = allSheetRows.filter(row => {\n Â  Â const id = Number(row.IDs);\n Â  Â // ç¢ºä¿æœ‰ IDã€æœ‰æ•¸é‡ï¼Œä¸”ä¸åœ¨æ’é™¤æ¸…å–®ä¸­\n Â  Â return row.IDs != null && row.æ•¸é‡ != null && !excludeIds.includes(id);\n});\n\n// --- 3. å¦‚æœéæ¿¾å¾Œæ²’æ±è¥¿äº†ï¼Œå°±åœæ­¢ ---\nif (filteredSheetRows.length === 0) {\n Â return { error: \"No categories found in Google Sheet (after filtering).\" };\n}\n\n// --- 4. æ‰¾å‡º \"æ•¸é‡\" (ä¾†è‡ª Sheet) æœ€å°çš„é‚£ä¸€åˆ— ---\nconst minSheetRow = filteredSheetRows.reduce((minRow, currentRow) => {\n Â const countA = Number(minRow.æ•¸é‡) || 0;\n Â const countB = Number(currentRow.æ•¸é‡) || 0;\n Â return countB < countA ? currentRow : minRow;\n});\n\n// --- 5. å–å¾—ã€Œå‹åˆ©è€…ã€çš„ ID ---\nconst targetId = Number(minSheetRow.IDs);\n\n// --- 6. å–å¾—ã€ŒWordPressã€çš„å®Œæ•´åˆ†é¡åˆ—è¡¨ ---\n// (æ³¨æ„ï¼ç¯€é»åç¨± 'HTTP Request' å¿…é ˆè·Ÿä½ çš„ç¯€é»åç¨±ä¸€æ¨¡ä¸€æ ·)\nconst allWPCategories = $items('HTTP Request').map(item => item.json);\nif (allWPCategories.length === 0) {\n Â  Â throw new Error(\"Node 'HTTP Request' did not return any categories.\");\n}\n\n// --- 7. (æ ¸å¿ƒ) åœ¨ WP åˆ—è¡¨ä¸­ï¼Œæ‰¾å‡º ID ç›¸ç¬¦çš„é‚£ç­†ã€Œå®Œæ•´ã€è³‡æ–™ ---\nconst targetCategory = allWPCategories.find(category => category.id === targetId);\n\n// --- 8. éŒ¯èª¤è™•ç† ---\nif (!targetCategory) {\n Â throw new Error(`Error: Sheet found min ID ${targetId}, but this ID was not found in the WordPress 'HTTP Request' data.`);\n}\n\n// --- 9. å›å‚³è·ŸèˆŠç¯€é»ä¸€æ¨£çš„æ ¼å¼ï¼ŒGemini ç¯€é»æ‰èƒ½ç„¡ç—›æ¥è»Œ ---\nreturn { \n Â message: `Successfully found weakest category from Google Sheet: ${targetCategory.name}`,\n Â target_category: targetCategory,\n Â target_category_name: targetCategory.name,\n Â target_category_id: targetCategory.id,\n Â post_count: targetCategory.count // é€™æ˜¯ WP ä¸Šçš„å³æ™‚ count\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        112,
        -192
      ],
      "id": "a8e84eb3-5840-4dc9-8a0e-0f96a127bd58",
      "name": "ç¯©é¸æ–‡ç« æ•¸é‡æœ€å°‘"
    },
    {
      "parameters": {
        "jsCode": "// 1. æŠ“å– Gemini åå‡ºä¾†çš„ã€Œæ–‡å­—ä¿æº«ç®±ã€\nconst geminiOutputString = $json.content.parts[0].text;\n\n// 2. (NEW) æŠ“å‡º { ... } ä¹‹é–“çš„ JSON å…§å®¹\n// Â  Â é€™èƒ½é †ä¾¿æ¸…æ‰ Gemini å¯èƒ½å¤šåŠ çš„ ```json ... ``` æˆ–å…¶ä»–æ–‡å­—\nconst match = geminiOutputString.match(/\\{[\\s\\S]*\\}/);\n\nif (!match) {\n Â throw new Error(\"åœ¨ Gemini è¼¸å‡ºä¸­æ‰¾ä¸åˆ°æœ‰æ•ˆçš„ JSON ç‰©ä»¶ { ... }ã€‚\");\n}\n\nlet jsonString = match[0];\n\n// 3. (NEW) è™•ç† \"Bad control character\" (éæ³•æ›è¡Œç¬¦)\n// Â  Â æˆ‘å€‘æŠŠæ‰€æœ‰ \\n (æ›è¡Œ), \\r (æ­¸ä½), \\t (tab) å…¨éƒ¨ç§»é™¤ã€‚\n// Â  Â é€™å¯èƒ½æœƒè®“ä½ çš„ HTML å…§å®¹è®Šæˆä¸€å¤§è¡Œï¼Œä½† HTML æ¸²æŸ“æ™‚æœ¬ä¾†å°±æœƒå¿½ç•¥å®ƒå€‘ï¼Œ\n// Â  Â è€Œä¸”é€™èƒ½ 100% è§£æ±º JSON.parse çš„å•é¡Œã€‚\njsonString = jsonString.replace(/(\\r\\n|\\n|\\r|\\t)/gm, \"\");\n\n// 4. ç”¨ JavaScript å…§å»ºçš„ JSON.parse() å¼·åˆ¶æ’¬é–‹\ntry {\n Â const parsedJson = JSON.parse(jsonString);\n Â \n Â // 5. æŠŠæ’¬é–‹çš„ä¹¾æ·¨ JSON å›å‚³çµ¦ä¸‹ä¸€å€‹ç¯€é»\n Â return [{ json: parsedJson }];\n\n} catch (error) {\n Â console.error(\"æ¸…ç†éçš„ JSON ä»ç„¶è§£æå¤±æ•—ã€‚\");\n Â console.error(\"å¤±æ•—çš„å­—ä¸²:\", jsonString); // åœ¨ n8n çš„ console æª¢æŸ¥é€™ä¸²\n Â throw new Error(`JSON è§£æå¤±æ•—: ${error.message}.`);\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        688,
        -192
      ],
      "id": "ea318ab3-5202-4639-a6d9-67a012a8f65c",
      "name": "è§£æGemini åˆ†è§£ç‚ºjson"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.wavespeed.ai/api/v3/stability-ai/stable-diffusion-3.5-large-turbo",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "aspect_ratio",
              "value": "1:1"
            },
            {
              "name": "enable_base64_output",
              "value": "false"
            },
            {
              "name": "prompt",
              "value": "={{ $('è§£æGemini åˆ†è§£ç‚ºjson').item.json.image_prompt }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -272,
        224
      ],
      "id": "ce64a293-d4aa-4ff2-8e9b-ee36bd6c561b",
      "name": "ç”Ÿæˆæ–‡ç« ç²¾é¸åœ–ç‰‡",
      "credentials": {
        "httpHeaderAuth": {
          "id": "mfJbgei5aVzE8QwJ",
          "name": "Header Auth account 2"
        }
      }
    },
    {
      "parameters": {
        "url": "={{ $json.data.outputs[0] }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        496,
        224
      ],
      "id": "735d7c85-e36f-4b99-8f6e-1978b2e7403e",
      "name": "ä¸‹è¼‰åœ–ç‰‡",
      "credentials": {
        "httpHeaderAuth": {
          "id": "mfJbgei5aVzE8QwJ",
          "name": "Header Auth account 2"
        }
      }
    },
    {
      "parameters": {
        "amount": 30
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -48,
        224
      ],
      "id": "31a56742-abb9-41ed-b053-cc90d624e017",
      "name": "Wait",
      "webhookId": "510a0d1c-1ad3-4d52-b984-ccbe2c5fe1c8"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.data.status }}",
                    "rightValue": "completed",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1bc06ced-3256-4a4d-a720-fe78f46f831c"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "success"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "fe7755ec-3a58-419f-a2cf-ba1a7f15a7ab",
                    "leftValue": "={{ $json.data.status }}",
                    "rightValue": "processing",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "in progress"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        288,
        224
      ],
      "id": "11336566-5e17-4555-89bc-2782c16c026c",
      "name": "Switch"
    },
    {
      "parameters": {
        "url": "={{ $json.data.urls.get }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        128,
        224
      ],
      "id": "1b5459a6-f9b1-4eca-ad4b-8cdb198b7248",
      "name": "å–å¾—åœ–ç‰‡",
      "credentials": {
        "httpHeaderAuth": {
          "id": "mfJbgei5aVzE8QwJ",
          "name": "Header Auth account 2"
        }
      }
    },
    {
      "parameters": {
        "title": "={{ $('è§£æGemini åˆ†è§£ç‚ºjson').item.json.title }}",
        "additionalFields": {
          "authorId": 2,
          "content": "={{ $('è§£æGemini åˆ†è§£ç‚ºjson').item.json.content }}",
          "slug": "={{ $('è§£æGemini åˆ†è§£ç‚ºjson').item.json.slug }}",
          "status": "publish",
          "commentStatus": "open",
          "pingStatus": "open",
          "categories": "={{ $('ç¯©é¸æ–‡ç« æ•¸é‡æœ€å°‘').item.json.target_category.id }}",
          "postTemplate": {
            "values": {}
          }
        }
      },
      "type": "n8n-nodes-base.wordpress",
      "typeVersion": 1,
      "position": [
        -736,
        224
      ],
      "id": "4dfed917-4753-4437-90ca-3b568831833e",
      "name": "ç™¼æ–‡",
      "credentials": {
        "wordpressApi": {
          "id": "mVkObqOlBXJkc3l8",
          "name": "Wordpress account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://example.com/wp-json/wp/v2/media",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Disposition",
              "value": "=attachment; filename=\"{{ $('è§£æGemini åˆ†è§£ç‚ºjson').item.json.slug }}.jpg\""
            }
          ]
        },
        "sendBody": true,
        "contentType": "binaryData",
        "inputDataFieldName": "data",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        720,
        224
      ],
      "id": "d69d4d72-08db-4fea-a33c-1e4bcd9e948c",
      "name": "ä¸Šå‚³åœ–ç‰‡",
      "credentials": {
        "wordpressApi": {
          "id": "mVkObqOlBXJkc3l8",
          "name": "Wordpress account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://example.com/wp-json/wp/v2/posts/{{ $('ç™¼æ–‡').first().json.id }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "featured_media",
              "value": "={{ $json.id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -720,
        528
      ],
      "id": "53e37f68-e6e0-4396-a09a-f0eb3d7f49c8",
      "name": "æ›´æ–°æ–‡ç« åœ–ç‰‡",
      "credentials": {
        "wordpressApi": {
          "id": "mVkObqOlBXJkc3l8",
          "name": "Wordpress account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "example",
          "mode": "list",
          "cachedResultName": "example SEO n8nç™¼å¸ƒ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/example/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 976148295,
          "mode": "list",
          "cachedResultName": "æ–‡ç« åˆ—è¡¨",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/example/edit#gid=976148295"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "title": "={{ $json.title.raw }}",
            "link": "={{ $json.guid.raw }}",
            "categories": "={{ $json.categories[0] }}",
            "content": "={{ $json.content.raw }}",
            "slug": "={{ $json.slug }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "content",
              "displayName": "content",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "categories",
              "displayName": "categories",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "slug",
              "displayName": "slug",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -480,
        224
      ],
      "id": "1373fab6-abd6-4fef-bb54-4718d05ffde6",
      "name": "æ›´æ–°æ–‡ç« åˆ—è¡¨",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "DGZU6cXtAGuDvYyN",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-pro",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-pro"
        },
        "messages": {
          "values": [
            {
              "content": "=// 1. æŠ“å–ä¸Šä¸€å€‹ Code ç¯€é»å›å‚³çš„è³‡æ–™\nconst codeOutput = $json;\nconst targetCategory = codeOutput.target_category;\n\n// 2. å»ºç«‹æç¤ºè©\nconst prompt = `\nã€ä»»å‹™èªªæ˜ã€‘\nä½ æ˜¯ä¸€ä½é ‚å°–çš„ SEO å…§å®¹å‰µä½œè€…ï¼Œè«‹ç‚ºåˆ†é¡ã€Œ{{ $json.target_category.name }}ã€æ’°å¯«ä¸€ç¯‡é«˜å“è³ªã€é«˜ SEO åˆ†æ•¸çš„æ–‡ç« ã€‚\nç¶²ç«™é¢¨æ ¼ï¼šexample.comï¼ˆæ™‚å°šã€ç²¾ç·»ã€å¹³åƒ¹çš„ 925 ç´”éŠ€é£¾å“ï¼‰ã€‚\n\nã€åš´æ ¼çš„ SEO æ’°å¯«è¦å‰‡ã€‘\n1. Â **é—œéµå­— (Keyword):** ä½ å¿…é ˆå…ˆæ±ºå®šä¸€å€‹ã€Œå–®ä¸€çš„ä¸­æ–‡ä¸»è¦é—œéµå­—ã€(focus_keyword)ã€‚\n2. Â **æ¨™é¡Œ (Title):** æ¨™é¡Œå¿…é ˆåŒ…å«é€™å€‹ã€Œfocus_keywordã€ï¼Œæœ€å¥½æ˜¯æ”¾åœ¨é–‹é ­ã€‚\n3. Â **æè¿° (Meta Description):** 150 å­—çš„ Meta æè¿°ï¼Œå¿…é ˆåŒ…å«ã€Œfocus_keywordã€ã€‚\n4. Â **ç¶²å€ (Slug):** è‹±æ–‡ slugï¼Œå¿…é ˆåŒ…å«ã€Œfocus_keywordã€çš„è‹±æ–‡ç¿»è­¯æˆ–æ‹¼éŸ³ã€‚\n5. Â **å…§å®¹ (Content):** 800ï½1000 å­—çš„ HTML å…§å®¹ã€‚\n6. Â **å…§å®¹è¦å‰‡ (Content Rules):**\n Â  Â * ã€Œfocus_keywordã€å¿…é ˆå‡ºç¾åœ¨ç¬¬ä¸€æ®µï¼ˆå‰ 10%ï¼‰ã€‚\n Â  Â * ã€Œfocus_keywordã€å¿…é ˆè‡³å°‘åœ¨ä¸€å€‹ H2 æˆ– H3 æ¨™é¡Œä¸­è‡ªç„¶å‡ºç¾ã€‚\n Â  Â * å…§å®¹å¿…é ˆåŒ…å« 1-2 å€‹é€£åˆ°å¤–éƒ¨æ¬Šå¨ç¶²ç«™çš„ <a> é€£çµï¼ˆä¾‹å¦‚æ™‚å°šé›œèªŒã€ç å¯¶ä¿é¤Šæ•™å­¸ï¼‰ã€‚\n Â  Â * å…§å®¹å¿…é ˆåŒ…å« 1-2 å€‹é€£åˆ° example.com ç¶²ç«™å…§éƒ¨çš„ <a> é€£çµï¼ˆä¾‹å¦‚ /shop æˆ– /category/rings/ï¼‰ã€‚\n\nã€å›å‚³æ ¼å¼ã€‘\nè«‹åš´æ ¼ä»¥ JSON æ ¼å¼å›å‚³ï¼Œä¸èƒ½åŒ…å«ä»»ä½•å¤šé¤˜æ–‡å­—æˆ–è¨»è§£ã€‚\n\n{\n Â \"focus_keyword\": \"ï¼ˆè«‹æ ¹æ“šã€Œ{{ $json.target_category.name }}ã€æ±ºå®šä¸€å€‹ã€Œå–®ä¸€ã€çš„ä¸­æ–‡ä¸»è¦é—œéµå­—ï¼‰\",\n Â \"title\": \"ï¼ˆè«‹ç”¢ç”Ÿä¸€å€‹ SEO æ¨™é¡Œï¼Œã€å¿…é ˆåŒ…å«ã€‘ä¸Šæ–¹çš„ focus_keywordï¼‰\",\n Â \"slug\": \"ï¼ˆè«‹ç”¢ç”Ÿ SEO å‹å–„çš„è‹±æ–‡ slugï¼Œã€å¿…é ˆåŒ…å«ã€‘focus_keyword çš„è‹±æ–‡ï¼‰\",\n Â \"meta_description\": \"ï¼ˆè«‹æ’°å¯« 150 å­—çš„ SEO Meta æè¿°ï¼Œã€å¿…é ˆåŒ…å«ã€‘ä¸Šæ–¹çš„ focus_keywordï¼‰\",\n Â \"content\": \"ï¼ˆè«‹æ’°å¯« 800ï½1000 å­—çš„ HTML æ–‡ç« ï¼Œä¸¦éµå®ˆã€åš´æ ¼çš„ SEO æ’°å¯«è¦å‰‡ã€‘ä¸­çš„æ‰€æœ‰å…§å®¹è¦å‰‡ï¼‰\",\n Â \"image_prompt\": \"ï¼ˆè«‹æ ¹æ“šä¸Šé¢ç”¢ç”Ÿçš„ã€Œtitleã€å’Œã€Œcontentã€ï¼Œæ’°å¯«ä¸€æ®µ 250 å­—ä»¥å…§ã€é©åˆ Stable Diffusion çš„è‹±æ–‡ promptã€‚é¢¨æ ¼éœ€ç¬¦åˆï¼šminimalist, elegant, high-quality, product photography, 925 sterling silver jewelryï¼‰\"\n}\n`;\n\n// 3. å›å‚³æœ€çµ‚æç¤ºè©\nreturn prompt;"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        304,
        -192
      ],
      "id": "9c3af9c4-6c73-4687-ba65-4e9dcc1899fd",
      "name": "Message a model1",
      "credentials": {
        "googlePalmApi": {
          "id": "Of8f4xZgtdDWQIRT",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://example.com/wp-json/wp/v2/media/{{ $('ä¸Šå‚³åœ–ç‰‡').first().json.id }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "alt_text",
              "value": "={{ $('è§£æGemini åˆ†è§£ç‚ºjson').item.json.focus_keyword }}"
            },
            {
              "name": "title",
              "value": "={{ $('è§£æGemini åˆ†è§£ç‚ºjson').item.json.title }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -32,
        528
      ],
      "id": "8fe6f116-835e-4e85-8d3a-d42b659a887f",
      "name": "æ›´æ–°æ–‡ç« åœ–ç‰‡SEO",
      "credentials": {
        "wordpressApi": {
          "id": "mVkObqOlBXJkc3l8",
          "name": "Wordpress account"
        }
      }
    },
    {
      "parameters": {
        "url": "=https://example.com/wp-json/wp/v2/posts/{{ $('ç™¼æ–‡').first().json.id }}?context=edit",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -256,
        528
      ],
      "id": "3294b8b7-fbc4-4d20-916c-89699a627302",
      "name": "HTTP Request1",
      "credentials": {
        "wordpressApi": {
          "id": "mVkObqOlBXJkc3l8",
          "name": "Wordpress account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "example",
          "mode": "list",
          "cachedResultName": "example SEO n8nç™¼å¸ƒ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/example/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "å–å¾—åˆ†é¡ID/æ›´æ–°æ•¸é‡",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/example/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -80,
        -192
      ],
      "id": "61a1e0ff-13dd-46bd-8b70-672006eaa190",
      "name": "æ‰¾å‡ºå„åˆ†é¡æ•¸é‡",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "DGZU6cXtAGuDvYyN",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "example@gmail.com",
        "subject": "=[example è‡ªå‹•ç™¼æ–‡]ï¼š{{ $('ç™¼æ–‡').item.json.title.raw }}",
        "message": "=<h3>ç³»çµ±å·²è‡ªå‹•ç™¼å¸ƒæ–°æ–‡ç«  (example.com)</h3>\n<p>å“ˆå›‰ï¼Œè‡ªå‹•åŒ–æµç¨‹å‰›å‰›ç™¼å¸ƒäº†ä¸€ç¯‡æ–°æ–‡ç« ï¼Œè«‹å”åŠ©æª¢æŸ¥å…§å®¹æ˜¯å¦æ­£ç¢ºã€‚</p>\n<hr>\n\n<p><strong>æ–‡ç« æ¨™é¡Œï¼š</strong><br>\n{{ $('ç™¼æ–‡').item.json.title.raw }}\n</p>\n\n<p><strong>ç™¼å¸ƒåˆ†é¡ï¼š</strong><br>\n{{ $('ç¯©é¸æ–‡ç« æ•¸é‡æœ€å°‘').item.json.target_category.name }}\n</p>\n\n<p><strong>Meta æè¿°ï¼š</strong><br>\n{{ $('è§£æGemini åˆ†è§£ç‚ºjson').item.json.meta_description }}\n</p>\n\n<hr>\n\n<p style=\"font-size: 16px;\">\n Â  Â <strong><a href=\"{{ $('ç™¼æ–‡').item.json.guid.raw }}\" target=\"_blank\">\n Â  Â  Â  Â ğŸ‘‰ é»æ­¤å‰å¾€æª¢æŸ¥æ–‡ç« \n Â  Â </a></strong>\n</p>\n",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        512,
        528
      ],
      "id": "6cec7e7d-fac2-4250-9112-57c07289e435",
      "name": "å¯„ä¿¡é€šçŸ¥",
      "webhookId": "dc4b43c8-6325-426d-9c60-620c4421bf9b",
      "executeOnce": true,
      "credentials": {
        "gmailOAuth2": {
          "id": "FJrhIG6eC5QW4MEP",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "url": "https://example.com/wp-json/wp/v2/categories",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        144,
        528
      ],
      "id": "90386d92-b3ab-4844-88ce-233c01186d58",
      "name": "æŠ“å–åˆ†é¡æ•¸é‡",
      "credentials": {
        "wordpressApi": {
          "id": "mVkObqOlBXJkc3l8",
          "name": "Wordpress account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "example",
          "mode": "list",
          "cachedResultName": "Example SEO n8nç™¼å¸ƒ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/example/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "å–å¾—åˆ†é¡ID/æ›´æ–°æ•¸é‡",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/example/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": "=",
            "æ•¸é‡": "={{ $json.count }}",
            "åˆ†é¡": "={{ $json.name }}",
            "IDs": "={{ $json.id }}"
          },
          "matchingColumns": [
            "åˆ†é¡"
          ],
          "schema": [
            {
              "id": "åˆ†é¡",
              "displayName": "åˆ†é¡",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "IDs",
              "displayName": "IDs",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "æ•¸é‡",
              "displayName": "æ•¸é‡",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        320,
        528
      ],
      "id": "e7a0b18c-feaf-4124-962c-e030c42d00f0",
      "name": "æ›´æ–°åˆ†é¡æ•¸é‡",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "DGZU6cXtAGuDvYyN",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://example.com/wp-json/wp/v2/posts/{{ $('ç™¼æ–‡').first().json.id }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "wordpressApi",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=\n{\n Â \"meta\": {\n Â  Â \"rank_math_title\": \"{{ $('è§£æGemini åˆ†è§£ç‚ºjson').item.json.title }}\",\n Â  Â \"rank_math_description\": \"{{ $('è§£æGemini åˆ†è§£ç‚ºjson').item.json.meta_description }}\",\n Â  Â \"rank_math_focus_keyword\": \"{{ $('è§£æGemini åˆ†è§£ç‚ºjson').item.json.focus_keyword }}\"\n Â }\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -464,
        528
      ],
      "id": "3edecf54-e671-42dd-bb08-06892c709f64",
      "name": "æ›´æ–°æ–‡ç« RankMathSEO",
      "credentials": {
        "wordpressApi": {
          "id": "mVkObqOlBXJkc3l8",
          "name": "Wordpress account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet": {
      "main": [
        [
          {
            "node": "æ‰¾å‡ºå„åˆ†é¡æ•¸é‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç¯©é¸æ–‡ç« æ•¸é‡æœ€å°‘": {
      "main": [
        [
          {
            "node": "Message a model1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è§£æGemini åˆ†è§£ç‚ºjson": {
      "main": [
        [
          {
            "node": "ç™¼æ–‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆæ–‡ç« ç²¾é¸åœ–ç‰‡": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸‹è¼‰åœ–ç‰‡": {
      "main": [
        [
          {
            "node": "ä¸Šå‚³åœ–ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "å–å¾—åœ–ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "ä¸‹è¼‰åœ–ç‰‡",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å–å¾—åœ–ç‰‡": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç™¼æ–‡": {
      "main": [
        [
          {
            "node": "æ›´æ–°æ–‡ç« åˆ—è¡¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸Šå‚³åœ–ç‰‡": {
      "main": [
        [
          {
            "node": "æ›´æ–°æ–‡ç« åœ–ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ›´æ–°æ–‡ç« åœ–ç‰‡": {
      "main": [
        [
          {
            "node": "æ›´æ–°æ–‡ç« RankMathSEO",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ›´æ–°æ–‡ç« åˆ—è¡¨": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆæ–‡ç« ç²¾é¸åœ–ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model1": {
      "main": [
        [
          {
            "node": "è§£æGemini åˆ†è§£ç‚ºjson",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ›´æ–°æ–‡ç« åœ–ç‰‡SEO": {
      "main": [
        [
          {
            "node": "æŠ“å–åˆ†é¡æ•¸é‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "æ›´æ–°æ–‡ç« åœ–ç‰‡SEO",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æŠ“å–åˆ†é¡æ•¸é‡": {
      "main": [
        [
          {
            "node": "æ›´æ–°åˆ†é¡æ•¸é‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ›´æ–°åˆ†é¡æ•¸é‡": {
      "main": [
        [
          {
            "node": "å¯„ä¿¡é€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ‰¾å‡ºå„åˆ†é¡æ•¸é‡": {
      "main": [
        [
          {
            "node": "ç¯©é¸æ–‡ç« æ•¸é‡æœ€å°‘",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ›´æ–°æ–‡ç« RankMathSEO": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "92f1de4d-5946-44f1-8178-a293c5e3aa60",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "4988b68f636ed9d5c0df5dabfe2f5ecd3d436361dbb1ad4ccdf3234eb322dafd"
  },
  "id": "ZzcJ1aVEdCqJhVAB",
  "tags": []
}